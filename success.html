<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Command Terminal</title>
    <style>
      #terminal {
        background-color: black;
        color: white;
        font-family: monospace;
        font-size: 14px;
        width: 600px;
        height: 400px;
        margin: 0 auto;
        overflow-y: scroll;
        white-space: pre-wrap;
        padding: 10px;
      }
      #command {
        background-color: black;
        color: white;
        font-family: monospace;
        font-size: 14px;
        border: none;
        width: 100%;
        box-sizing: border-box;
        padding: 10px;
      }
    </style>
  </head>
  <body>
    <div id="terminal"></div>
    <input type="text" id="command" placeholder="Enter a command...">
    <script>
      var terminal = document.getElementById('terminal');
      var command = document.getElementById('command');

      // Add a new line to the terminal
      function addLine(text) {
        terminal.textContent += text + '\n';
        terminal.scrollTop = terminal.scrollHeight;
      }

      // Send a command to the server
      function sendCommand(cmd) {
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/execute_command');
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onreadystatechange = function() {
          if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
              addLine('> ' + cmd);
              addLine(xhr.responseText);
            } else {
              addLine('Error: ' + xhr.status);
            }
            command.value = '';
          }
        };
        xhr.send(JSON.stringify({command: cmd}));
      }

      // Handle command submission
      command.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          var cmd = command.value.trim();
          if (cmd) {
            sendCommand(cmd);
          }
        }
      });

      // Welcome message
      addLine('Microsoft Windows [Version 10.0.19041.928]\n(c) Microsoft Corporation. All rights reserved.');
      addLine('');
      addLine('Type "help" for a list of available commands.');
    </script>
  </body>
</html>
